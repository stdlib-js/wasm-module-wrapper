{"version":3,"file":"index.mjs","sources":["../lib/main.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2024 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n/* eslint-disable no-restricted-syntax, no-invalid-this, no-underscore-dangle */\n\n'use strict';\n\n// MODULES //\n\nimport { isPrimitive as isNonNegativeInteger } from '@stdlib/assert-is-nonnegative-integer';\nimport isCollection from '@stdlib/assert-is-collection';\nimport isArrayBuffer from '@stdlib/assert-is-arraybuffer';\nimport isFunction from '@stdlib/assert-is-function';\nimport setReadOnly from '@stdlib/utils-define-nonenumerable-read-only-property';\nimport setReadOnlyAccessor from '@stdlib/utils-define-nonenumerable-read-only-accessor';\nimport hasWebAssemblySupport from '@stdlib/assert-has-wasm-support';\nimport objectAssign from '@stdlib/object-assign';\nimport Uint8Array from '@stdlib/array-uint8';\nimport DataView from '@stdlib/array-dataview';\nimport bytesPerElement from '@stdlib/ndarray-base-bytes-per-element';\nimport ceil from '@stdlib/math-base-special-ceil';\nimport { ndarray as writeDataView } from '@stdlib/strided-base-write-dataview';\nimport { ndarray as readDataView } from '@stdlib/strided-base-read-dataview';\nimport dtype from '@stdlib/array-dtype';\nimport dtype2wasm from '@stdlib/wasm-base-dtype2wasm';\nimport format from '@stdlib/error-tools-fmtprodmsg';\n\n\n// VARIABLES //\n\nvar HAS_WASM_SUPPORT = hasWebAssemblySupport();\nvar PAGE_SIZE = 64 * 1024; // 64KiB = size of 1 page   // TODO: consider moving to `@stdlib/constants/wasm/page-size`\n\n\n// MAIN //\n\n/**\n* WebAssembly module wrapper constructor.\n*\n* @constructor\n* @param {(Uint8Array|ArrayBuffer)} binary - WebAssembly binary code\n* @param {(Object|null)} memory - WebAssembly memory instance\n* @param {Object} [imports] - WebAssembly module import object\n* @throws {Error} environment does not support WebAssembly\n* @returns {WasmModule} wrapper instance\n*/\nfunction WasmModule( binary, memory, imports ) {\n\tif ( !( this instanceof WasmModule ) ) {\n\t\tif ( arguments.length > 2 ) {\n\t\t\treturn new WasmModule( binary, memory, imports );\n\t\t}\n\t\treturn new WasmModule( binary, memory, {} );\n\t}\n\tif ( !HAS_WASM_SUPPORT ) {\n\t\tthrow new Error( 'unexpected error. Environment does not support WebAssembly.' );\n\t}\n\tif ( isArrayBuffer( binary ) ) {\n\t\tbinary = new Uint8Array( binary );\n\t}\n\tthis._binary = binary;\n\tthis._module = null;\n\tthis._instance = null;\n\tthis._imports = imports;\n\n\tif ( memory ) {\n\t\tthis._memory = memory;\n\t\tthis._view = new DataView( memory.buffer );\n\t\tthis._buffer = new Uint8Array( memory.buffer );\n\t} else {\n\t\tthis._memory = null;\n\t\tthis._view = null;\n\t\tthis._buffer = null;\n\t}\n\n\treturn this;\n}\n\n/**\n* Returns WebAssembly binary code.\n*\n* @name binary\n* @memberof WasmModule.prototype\n* @readonly\n* @type {Uint8Array}\n*/\nsetReadOnlyAccessor( WasmModule.prototype, 'binary', function get() {\n\treturn this._binary.slice();\n});\n\n/**\n* Returns WebAssembly memory.\n*\n* @name memory\n* @memberof WasmModule.prototype\n* @readonly\n* @type {(Object|null)}\n*/\nsetReadOnlyAccessor( WasmModule.prototype, 'memory', function get() {\n\treturn this._memory;\n});\n\n/**\n* Returns a WebAssembly memory buffer as a `Uint8Array`.\n*\n* @name buffer\n* @memberof WasmModule.prototype\n* @readonly\n* @type {(Uint8Array|null)}\n*/\nsetReadOnlyAccessor( WasmModule.prototype, 'buffer', function get() {\n\treturn this._buffer;\n});\n\n/**\n* Returns a WebAssembly memory buffer as a `DataView`.\n*\n* @name view\n* @memberof WasmModule.prototype\n* @readonly\n* @type {(DataView|null)}\n*/\nsetReadOnlyAccessor( WasmModule.prototype, 'view', function get() {\n\treturn this._view;\n});\n\n/**\n* Returns \"raw\" WebAssembly module exports.\n*\n* @name exports\n* @memberof WasmModule.prototype\n* @readonly\n* @type {(Object|null)}\n*/\nsetReadOnlyAccessor( WasmModule.prototype, 'exports', function get() {\n\tif ( !this._instance ) {\n\t\treturn null;\n\t}\n\treturn objectAssign( {}, this._instance.exports );\n});\n\n/**\n* Asynchronously initializes a WebAssembly module instance.\n*\n* @name initialize\n* @memberof WasmModule.prototype\n* @readonly\n* @type {Function}\n* @returns {Promise} promise which resolves upon initializing a WebAssembly module instance\n*/\nsetReadOnly( WasmModule.prototype, 'initialize', function initialize() {\n\tvar self;\n\tvar fcn;\n\n\tself = this;\n\tif ( this._instance ) {\n\t\tfcn = returnInstance;\n\t} else {\n\t\tfcn = instantiate;\n\t}\n\t// FIXME: replace with `@stdlib/promise/ctor`\n\treturn new Promise( fcn ); // eslint-disable-line stdlib/require-globals\n\n\t/**\n\t* Returns a WebAssembly instance.\n\t*\n\t* @private\n\t* @param {Function} resolve - callback to invoke upon fulfilling a promise\n\t* @param {Function} reject - callback to invoke upon rejecting a promise\n\t* @returns {void}\n\t*/\n\tfunction returnInstance( resolve ) {\n\t\tresolve( self );\n\t}\n\n\t/**\n\t* Instantiates a WebAssembly instance.\n\t*\n\t* @private\n\t* @param {Function} resolve - callback to invoke upon fulfilling a promise\n\t* @param {Function} reject - callback to invoke upon rejecting a promise\n\t* @returns {void}\n\t*/\n\tfunction instantiate( resolve, reject ) {\n\t\tvar p = WebAssembly.instantiate( self._binary, self._imports ); // TODO: replace with `@stdlib/wasm/instantiate`\n\t\tp.then( onResolve, onReject );\n\n\t\t/**\n\t\t* Callback invoked upon fulfilling a promise.\n\t\t*\n\t\t* @private\n\t\t* @param {Object} module - WebAssembly module\n\t\t* @param {Object} instance - WebAssembly instance\n\t\t* @returns {void}\n\t\t*/\n\t\tfunction onResolve( module, instance ) {\n\t\t\tself._module = module;\n\t\t\tself._instance = instance;\n\t\t\tresolve( self );\n\t\t}\n\n\t\t/**\n\t\t* Callback invoked upon rejecting a promise.\n\t\t*\n\t\t* @private\n\t\t* @param {*} reason - reason for rejecting a promise\n\t\t*/\n\t\tfunction onReject( reason ) {\n\t\t\treject( reason );\n\t\t}\n\t}\n});\n\n/**\n* Asynchronously initializes a WebAssembly module instance.\n*\n* @name initializeAsync\n* @memberof WasmModule.prototype\n* @readonly\n* @type {Function}\n* @param {Callback} clbk - callback to invoke upon initializing a WebAssembly module instance\n* @throws {TypeError} must provide a callback function\n* @returns {void}\n*/\nsetReadOnly( WasmModule.prototype, 'initializeAsync', function initializeAsync( clbk ) {\n\tvar self;\n\tvar p;\n\n\tif ( !isFunction( clbk ) ) {\n\t\tthrow new TypeError( format( 'null3J', clbk ) );\n\t}\n\tif ( this._instance ) {\n\t\treturn clbk( null, this );\n\t}\n\tself = this;\n\tp = WebAssembly.instantiate( this._binary, this._imports ); // TODO: replace with `@stdlib/wasm/instantiate`\n\tp.then( onResolve, onReject );\n\n\t/**\n\t* Callback invoked upon fulfilling a promise.\n\t*\n\t* @private\n\t* @param {Object} module - WebAssembly module\n\t* @param {Object} instance - WebAssembly instance\n\t* @returns {void}\n\t*/\n\tfunction onResolve( module, instance ) {\n\t\tself._module = module;\n\t\tself._instance = instance;\n\t\tclbk( null, self );\n\t}\n\n\t/**\n\t* Callback invoked upon rejecting a promise.\n\t*\n\t* @private\n\t* @param {*} reason - reason for rejecting a promise\n\t*/\n\tfunction onReject( reason ) {\n\t\tclbk( reason );\n\t}\n});\n\n/**\n* Synchronously initializes a WebAssembly module instance.\n*\n* ## Notes\n*\n* -   In web browsers, JavaScript engines may raise an exception when attempting to synchronously compile large WebAssembly binaries due to concerns about blocking the main thread. Hence, for large binaries (e.g., >4KiB), consider using asynchronous initialization methods.\n*\n* @name initializeSync\n* @memberof WasmModule.prototype\n* @readonly\n* @type {Function}\n* @returns {WasmModule} wrapper instance\n*/\nsetReadOnly( WasmModule.prototype, 'initializeSync', function initializeSync() {\n\tif ( this._instance ) {\n\t\treturn this;\n\t}\n\tthis._module = new WebAssembly.Module( this._binary ); // TODO: replace with `@stdlib/wasm/module`\n\tthis._instance = new WebAssembly.Instance( this._module, this._imports ); // TODO: replace with `@stdlib/wasm/instantiate`\n\treturn this;\n});\n\n/**\n* Reallocates the underlying WebAssembly memory instance to a specified number of bytes.\n*\n* ## Notes\n*\n* -   WebAssembly memory can only **grow**, not shrink. Hence, if provided a number of bytes which is less than or equal to the size of the current memory, the function does nothing.\n* -   When non-shared memory is resized, the underlying the `ArrayBuffer` is detached, consequently invalidating any associated typed array views. Before resizing non-shared memory, ensure that associated typed array views no longer need byte access and can be garbage collected.\n*\n* @name realloc\n* @memberof WasmModule.prototype\n* @readonly\n* @type {Function}\n* @param {NonNegativeInteger} nbytes - memory size (in bytes)\n* @throws {TypeError} must provide a nonnegative integer\n* @returns {boolean} boolean indicating whether the resize operation was successful\n*/\nsetReadOnly( WasmModule.prototype, 'realloc', function realloc( nbytes ) {\n\tvar size;\n\tif ( !isNonNegativeInteger( nbytes ) ) {\n\t\tthrow new TypeError( format( 'null2K', nbytes ) );\n\t}\n\tif ( this._memory === null ) {\n\t\treturn false;\n\t}\n\tsize = ceil( ( nbytes-this._buffer.length ) / PAGE_SIZE );\n\tif ( size > 0 ) {\n\t\ttry {\n\t\t\tthis._memory.grow( size );\n\t\t} catch ( err ) { // eslint-disable-line no-unused-vars\n\t\t\treturn false;\n\t\t}\n\t\tthis._view = new DataView( this._memory.buffer );\n\t\tthis._buffer = new Uint8Array( this._memory.buffer );\n\t\treturn true;\n\t}\n\treturn false;\n});\n\n/**\n* Returns a boolean indicating whether the underlying WebAssembly memory instance has the capacity to store a provided list of values starting from a specified byte offset.\n*\n* @name hasCapacity\n* @memberof WasmModule.prototype\n* @readonly\n* @type {Function}\n* @param {NonNegativeInteger} byteOffset - byte offset at which to start writing values\n* @param {Collection} values - input array containing values to write\n* @throws {TypeError} first argument must be a nonnegative integer\n* @throws {TypeError} second argument must be a collection\n* @returns {boolean} boolean indicating whether the underlying WebAssembly memory instance has enough capacity\n*/\nsetReadOnly( WasmModule.prototype, 'hasCapacity', function hasCapacity( byteOffset, values ) {\n\tvar nb;\n\tif ( !isNonNegativeInteger( byteOffset ) ) {\n\t\tthrow new TypeError( format( 'null2d', byteOffset ) );\n\t}\n\tif ( !isCollection( values ) ) {\n\t\tthrow new TypeError( format( 'null2y', values ) );\n\t}\n\tif ( this._memory === null ) {\n\t\treturn false;\n\t}\n\tnb = bytesPerElement( dtype2wasm( dtype( values ) || 'generic' ) );\n\tif ( (values.length*nb)+byteOffset > this._buffer.length ) {\n\t\treturn false;\n\t}\n\treturn true;\n});\n\n/**\n* Returns a boolean indicating whether a provided list of values is a view of the underlying memory of the WebAssembly module.\n*\n* @name isView\n* @memberof WasmModule.prototype\n* @readonly\n* @type {Function}\n* @param {Collection} values - input array\n* @throws {TypeError} must provide a collection\n* @returns {boolean} boolean indicating whether the list is a memory view\n*/\nsetReadOnly( WasmModule.prototype, 'isView', function isView( values ) {\n\tif ( !isCollection( values ) ) {\n\t\tthrow new TypeError( format( 'null2u', values ) );\n\t}\n\tif ( this._memory && values.buffer ) {\n\t\treturn ( values.buffer === this._memory.buffer );\n\t}\n\treturn false;\n});\n\n/**\n* Writes values to the underlying WebAssembly memory instance.\n*\n* ## Notes\n*\n* -   The function infers element size (i.e., number of bytes per element) from the data type of the input array. For example, if provided a `Float32Array`, the function writes each element as a single-precision floating-point number to the underlying WebAssembly memory instance.\n* -   In order to write elements as a different data type, you need to perform an explicit cast **before** calling this method. For example, in order to write single-precision floating-point numbers contained in a `Float32Array` as signed 32-bit integers, you must first convert the `Float32Array` to an `Int32Array` before passing the values to this method.\n* -   If provided an array having an unknown or \"generic\" data type, elements are written as double-precision floating-point numbers.\n*\n* @name write\n* @memberof WasmModule.prototype\n* @readonly\n* @type {Function}\n* @param {NonNegativeInteger} byteOffset - byte offset at which to start writing values\n* @param {Collection} values - input array containing values to write\n* @throws {TypeError} first argument must be a nonnegative integer\n* @throws {TypeError} second argument must be a collection\n* @throws {Error} unable to perform write operation as the module is not bound to a memory instance\n* @throws {RangeError} insufficient memory\n* @returns {WasmModule} wrapper instance\n*/\nsetReadOnly( WasmModule.prototype, 'write', function write( byteOffset, values ) {\n\tvar nb;\n\tif ( this._memory === null ) {\n\t\tthrow new Error( 'invalid invocation. Unable to perform write operation, as the WebAssembly module is not bound to an underlying WebAssembly memory instance.' );\n\t}\n\tif ( !isNonNegativeInteger( byteOffset ) ) {\n\t\tthrow new TypeError( format( 'null2d', byteOffset ) );\n\t}\n\tif ( !isCollection( values ) ) {\n\t\tthrow new TypeError( format( 'null2y', values ) );\n\t}\n\tnb = bytesPerElement( dtype2wasm( dtype( values ) || 'generic' ) );\n\tif ( (values.length*nb)+byteOffset > this._buffer.length ) {\n\t\tthrow new RangeError( 'invalid argument. Second argument is incompatible with the specified byte offset and available memory. Resize the underlying memory instance in order to accommodate the list of provided values.' );\n\t}\n\twriteDataView( values.length, values, 1, 0, this._view, nb, byteOffset, true ); // eslint-disable-line max-len\n\treturn this;\n});\n\n/**\n* Reads values from the underlying WebAssembly memory instance.\n*\n* ## Notes\n*\n* -   The function infers element size (i.e., number of bytes per element) from the data type of the output array. For example, if provided a `Float32Array`, the function reads each element as a single-precision floating-point number from the underlying WebAssembly memory instance.\n* -   In order to read elements as a different data type, you need to perform an explicit cast **after** calling this method. For example, in order to read single-precision floating-point numbers contained in a `Float32Array` as signed 32-bit integers, you must convert the `Float32Array` to an `Int32Array` after reading memory values using this method.\n* -   If provided an output array having an unknown or \"generic\" data type, elements are read as double-precision floating-point numbers.\n*\n* @name read\n* @memberof WasmModule.prototype\n* @readonly\n* @type {Function}\n* @param {NonNegativeInteger} byteOffset - byte offset at which to start reading values\n* @param {Collection} out - output array for storing read values\n* @throws {TypeError} first argument must be a nonnegative integer\n* @throws {TypeError} second argument must be a collection\n* @throws {Error} unable to perform read operation as the module is not bound to a memory instance\n* @throws {RangeError} output array exceeds module memory\n* @returns {WasmModule} wrapper instance\n*/\nsetReadOnly( WasmModule.prototype, 'read', function write( byteOffset, out ) {\n\tvar nb;\n\tif ( this._memory === null ) {\n\t\tthrow new Error( 'invalid invocation. Unable to perform read operation, as the WebAssembly module is not bound to an underlying WebAssembly memory instance.' );\n\t}\n\tif ( !isNonNegativeInteger( byteOffset ) ) {\n\t\tthrow new TypeError( format( 'null2d', byteOffset ) );\n\t}\n\tif ( !isCollection( out ) ) {\n\t\tthrow new TypeError( format( 'null2y', out ) );\n\t}\n\tnb = bytesPerElement( dtype2wasm( dtype( out ) || 'generic' ) );\n\tif ( (out.length*nb)+byteOffset > this._buffer.length ) {\n\t\tthrow new RangeError( 'invalid argument. Second argument is incompatible with the specified byte offset and available memory. Not enough values to fill the provided output array.' );\n\t}\n\treadDataView( out.length, this._view, nb, byteOffset, out, 1, 0, true );\n\treturn this;\n});\n\n\n// EXPORTS //\n\nexport default WasmModule;\n"],"names":["HAS_WASM_SUPPORT","hasWebAssemblySupport","WasmModule","binary","memory","imports","this","arguments","length","Error","isArrayBuffer","Uint8Array","_binary","_module","_instance","_imports","_memory","_view","DataView","buffer","_buffer","setReadOnlyAccessor","prototype","slice","objectAssign","exports","setReadOnly","self","fcn","resolve","reject","onResolve","module","instance","onReject","reason","WebAssembly","instantiate","then","Promise","clbk","isFunction","TypeError","format","Module","Instance","nbytes","size","isNonNegativeInteger","ceil","grow","err","byteOffset","values","nb","isCollection","bytesPerElement","dtype2wasm","dtype","RangeError","writeDataView","out","readDataView"],"mappings":"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"}